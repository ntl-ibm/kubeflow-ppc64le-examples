apiVersion: "kubeflow.org/v1"
kind: PyTorchJob
metadata:
  name: elastic-example-echo
spec:
  elasticPolicy:
    rdzvBackend: c10d
    minReplicas: 6
    maxReplicas: 6
    maxRestarts: 0
  pytorchReplicaSpecs:
    Worker:
      replicas: 6
      template:
        spec:
          containers:
            - name: pytorch
              image: quay.io/ntlawrence/echo:1.0.31
              imagePullPolicy: IfNotPresent
              env:
                - name: LOGLEVEL
                  value: DEBUG
              command:
                - python
                - -m
                - torch.distributed.run
                - --rdzv_backend=c10d
                - ./echo.py
